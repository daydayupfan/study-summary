## 写时复制（COPY ON WRITE cow）

如果多个程序同时访问同一块数据，那么每个程序都拥有指向这块数据的指针，在每个程序看来，自己都是独立拥有这块数据的，只有当程序需要对数据内容进行修改时，才会把数据内容拷贝到程序自己的应用空间里去，这时候，数据才成为该程序的私有数据。如果程序不需要对数据进行修改，那么永远都不需要拷贝数据到自己的应用空间里。这样就减少了数据的拷贝。



传统数据copy

![](E:\ideaWorkSpace2019\study\study-summary\NIO\images\数据拷贝.jpg)

mmp:

![](E:\ideaWorkSpace2019\study\study-summary\NIO\images\mmp.jpg)

sendfile: 典型使用 kafka

![](E:\ideaWorkSpace2019\study\study-summary\NIO\images\sendfile.jpg)

![](E:\ideaWorkSpace2019\study\study-summary\NIO\images\sendfile pagecache直接发送到网络.jpg)

